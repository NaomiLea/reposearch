<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Repo search</title>
    <script src="https://unpkg.com/react@latest/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/styles.css">
    <script src="public/js/index.js"></script>
</head>

<body>
    <div id="searching"></div>
    <script type="text/babel">

    let searchTerm;




 class SearchBox extends React.Component {

    constructor(props) {
        super(props);
        this.onKeyUp = this.onKeyUp.bind(this);
       
    }

  
    render() {
        return(
            <form>
                <input type="text" className="searchbox" onKeyUp={this.onKeyUp} ref={(input) => { this.searchBox = input; }}/>
 
            </form>
        );
    }

    onKeyUp(event) {
            const matchArray = findMatches(this.value, repositories);
    const html = matchArray.map(place => {
        const regex = new RegExp(this.value, "gi");
        const cityName = place.name.replace(regex, `<span className="hl">${this.value}</span>`);
       
        return `
      <li>
      <span class="nameName">${cityName}, </span>
    
      </li>
      `;
    }).join('');
    console.log(matchArray);
   searchTerm = this.searchBox.value;
   let endpoint = 'https://api.github.com/search/repositories?sort=stars&order=desc&q=' + searchTerm;
   console.log(searchTerm);
        fetch(endpoint)
    .then(blob => blob.json())
    .then(data => repositories.push(...data));
    
console.log(endpoint);
    }
}



ReactDOM.render(
    <SearchBox />,
    document.getElementById("searching")
);
    </script>
</body>

</html>
